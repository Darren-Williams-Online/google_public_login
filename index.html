
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Public Login</title>
    <link rel="icon" type="image/x-icon" href="static/favicon.ico">
    <link rel="stylesheet" href="static/styles.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
    <style>
    .fan-menu-btn.megaphone-shadow {
        box-shadow: 0 2px 12px 0 #b3e0ff, 0 2px 8px 0 rgba(0,0,0,0.08);
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    }
    .fan-menu-btn.star-shadow {
        box-shadow: 0 2px 12px 0 #fff9c4, 0 2px 8px 0 rgba(0,0,0,0.08);
        background: linear-gradient(135deg, #fffde7 0%, #fff9c4 100%);
    }
    .fan-menu-btn.megaphone-shadow {
        box-shadow: 0 2px 12px 0 #b3e0ff, 0 2px 8px 0 rgba(0,0,0,0.08);
    }
    .fan-menu-btn.star-shadow {
        box-shadow: 0 2px 12px 0 #fff9c4, 0 2px 8px 0 rgba(0,0,0,0.08);
    }
    .fan-menu-container {
        position: absolute;
        right: 0;
        top: 0;
        width: 140px;
        height: 140px;
        pointer-events: none;
        z-index: 20;
    }
    .fan-menu-btn {
        position: absolute;
        right: 0;
        top: 0;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #fff;
        border: 1px solid #e0e0e0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
        opacity: 0;
        transform: translate(0, 0) scale(0.7);
        transition: opacity 0.35s cubic-bezier(.4,2,.6,1), transform 0.35s cubic-bezier(.4,2,.6,1);
        pointer-events: auto;
    }
    .fan-menu-container.open .fan-menu-btn {
        opacity: 1;
        transform:
            translate(0, 0)
            translate(var(--fan-x, 0), var(--fan-y, 0))
            scale(1);
        pointer-events: auto;
    }
    .fan-menu-container:not(.open) .fan-menu-btn {
        pointer-events: none;
    }
    </style>
<body>
    <header style="position: relative; min-height: 60px;">
        <h1 style="margin: 0; padding: 16px 0 16px 16px;">Google Public Login</h1>
        <div class="user-menu-container" style="position: absolute; top: 12px; right: 24px; z-index: 10;">
            <div class="user-icon" id="userIcon" tabindex="0" style="cursor: pointer;">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="16" cy="16" r="15" stroke="#bdbdbd" stroke-width="1.2" fill="#fafbfc"/>
                    <circle cx="16" cy="13" r="6" stroke="#bdbdbd" stroke-width="1.2" fill="none"/>
                    <ellipse cx="16" cy="24" rx="8" ry="5" stroke="#bdbdbd" stroke-width="1.2" fill="none"/>
                </svg>
            </div>
            <div class="user-dropdown" id="userDropdown" style="display:none; position: absolute; right: 0; top: 40px; background: #fff; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 16px; min-width: 220px;">
                <div id="g_id_onload"
                     data-client_id="590236211605-r4e76i4iru11usaka1b4ng3rfu213tr8.apps.googleusercontent.com"
                     data-context="signin"
                     data-ux_mode="popup"
                     data-callback="handleCredentialResponse"
                     data-auto_prompt="false">
                </div>
                <div class="g_id_signin"
                     data-type="standard"
                     data-size="large"
                     data-theme="outline"
                     data-text="sign_in_with"
                     data-shape="rectangular"
                     data-logo_alignment="left">
                </div>
                <button id="apple-signin-btn" style="margin-top: 16px; width: 100%; background: #000; color: #fff; border: none; border-radius: 6px; padding: 10px 0; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer;">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: middle;"><path d="M16.67 10.98c-.01-2.04 1.66-3.01 1.73-3.06-0.95-1.39-2.43-1.58-2.95-1.6-1.26-.13-2.46.74-3.1.74-.64 0-1.63-.72-2.68-.7-1.38.02-2.66.8-3.37 2.03-1.44 2.5-.37 6.2 1.03 8.23.68.98 1.49 2.08 2.56 2.04 1.03-.04 1.42-.66 2.67-.66 1.25 0 1.6.66 2.68.64 1.11-.02 1.81-.99 2.48-1.97.78-1.13 1.1-2.23 1.12-2.29-.02-.01-2.14-.82-2.16-3.25zm-2.54-5.93c.57-.7.95-1.67.85-2.65-.82.03-1.81.55-2.4 1.25-.53.62-.99 1.61-.82 2.56.87.07 1.8-.44 2.37-1.16z" fill="#fff"/></svg>
                    Sign in with Apple
                </button>
            </div>
        </div>
    </header>
    <main>
        <section id="login-section">
            <h2>Welcome to Google Public Login</h2>
            <p>Please sign in with your Google account to continue.</p>
            
            <!-- Google Sign-In Button (auto-prompt disabled) -->
            <div id="g_id_onload"
                 data-client_id="590236211605-r4e76i4iru11usaka1b4ng3rfu213tr8.apps.googleusercontent.com"
                 data-context="signin"
                 data-ux_mode="popup"
                 data-callback="handleCredentialResponse"
                 data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                 data-type="standard"
                 data-size="large"
                 data-theme="outline"
                 data-text="sign_in_with"
                 data-shape="rectangular"
                 data-logo_alignment="left">
            </div>
            
            <!-- Manual Sign-In Button (fallback) -->
            <button id="manual-signin" style="margin-top: 20px; display: none;">
                Sign in with Google
            </button>
            
            <!-- Test Popup Button for debugging -->
            <button id="test-popup" style="margin-top: 10px; background: #ff9800; color: white; border: none; padding: 8px 16px; border-radius: 4px;">
                Test Popup Login
            </button>
            
            <!-- Reset Google State Button -->
            <button onclick="window.googleLoginDebug.resetGoogleState()" style="margin-top: 5px; background: #9c27b0; color: white; border: none; padding: 8px 16px; border-radius: 4px;">
                Reset Google State
            </button>
            
            <!-- Force Popup Button -->
            <button onclick="window.googleLoginDebug.forcePopup()" style="margin-top: 5px; background: #f44336; color: white; border: none; padding: 8px 16px; border-radius: 4px;">
                Force Popup
            </button>
            
            <!-- Check State Button -->
            <button onclick="window.googleLoginDebug.checkState()" style="margin-top: 5px; background: #607d8b; color: white; border: none; padding: 8px 16px; border-radius: 4px;">
                Check State
            </button>
        </section>
        
        <section id="profile-section" style="display: none; max-width: 800px;">
            <h2>Welcome!</h2>
            <div id="user-info"></div>
            <button id="signout-btn">Sign Out</button>
        </section>
    </main>
    <footer>
        &copy; 2025 Google Public Login
    </footer>
    <script src="google_login.js"></script>
    <script src="apple_signin.js"></script>
    <script src="user_menu.js"></script>
</body>
</html>